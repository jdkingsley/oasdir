"0","# earningsJQAime <- earningsJQFica"
"0","# earningsJQAime$Type <- ""AIME"""
"0","# "
"0","# # Remove any earnings before the age of 22"
"0","# earningsJQAime <- earningsJQAime[earningsJQAime$startYear >="
"0","#                                    lubridate::year(birthDateJQ) + 22,]"
"0","# "
"0","# ### Now calculate the Average Indexed Monthly Earnings"
"0","# # get base awi amount"
"0","# baseAwiJQ <- getAwiValues(years = retireElgYearJQ - 2)"
"0","# "
"0","# # calculate factors"
"0","# factors <- getAwiSet(endYear = retireElgYearJQ)"
"0","# factors <- factors[factors$Year %in% c(min(earningsJQAime$startYear):retireElgYearJQ),]"
"0","# factors$factor <- baseAwiJQ / factors$AWI"
"0","# factors$factor[which(factors$Year > (retireElgYearJQ - 2))] <- 1.0"
"0","# "
"0","# # add the multiplying factors"
"0","# earningsJQAime$factors <- factors[match(earningsJQAime$startYear, factors$Year),]$factor"
"0","# earningsJQAime <- earningsJQAime[!is.na(earningsJQAime$factors),]"
"0","# earningsJQAime$Earnings <- earningsJQAime$Earnings * earningsJQAime$factors"
"0","# "
"0","# # get highest (up to) 35 years of taxed social security wages"
"0","# earningsJQAime <- earningsJQAime[order(earningsJQAime$Earnings, decreasing = TRUE),]"
"0","# if(nrow(earningsJQAime > 35))"
"0","#   earningsJQAime <- earningsJQAime[1:35,]"
"0","# and calculate AIME"
"0","aimeJQ <- getAimeValue(ssStmt = ssJQ, endYear = year(retireDateJQ))"
"2","Error in getAimeValue(ssStmt = ssJQ, endYear = year(retireDateJQ)) : 
  could not find function ""getAimeValue""
"
